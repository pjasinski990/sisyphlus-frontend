@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Fira+Sans:wght@400;600;700&display=swap');

@import 'tailwindcss';
@import './custom-scrollbar.css';

@plugin 'tailwind-scrollbar';

:root.dark { color-scheme: dark; }
:root:not(.dark) { color-scheme: light; }

@theme {
  /* Typography */
  --font-primary: 'Inter', sans-serif;
  --font-secondary: 'Fira Sans', sans-serif;
  --h1: 600 3rem/1.2em var(--font-secondary);
  --h2: 600 2rem/1.2em var(--font-secondary);
  --h3: 600 1.2rem/1.3em var(--font-secondary);
  --p: 1rem/1.5em var(--font-primary);
  --span: 1rem/1.0em var(--font-primary);

  /* Neutral ramp */
  --ink-10: oklch(0.98 0.01 260);
  --ink-20: oklch(0.95 0.01 260);
  --ink-30: oklch(0.90 0.01 260);
  --ink-40: oklch(0.84 0.01 260);
  --ink-50: oklch(0.75 0.02 260);
  --ink-60: oklch(0.62 0.03 260);
  --ink-70: oklch(0.50 0.03 260);
  --ink-80: oklch(0.40 0.03 260);
  --ink-90: oklch(0.30 0.03 260);
  --ink-100: oklch(0.22 0.03 260);

  /* Stone */
  --stone-20: oklch(0.93 0.03 80);
  --stone-40: oklch(0.86 0.04 80);
  --stone-60: oklch(0.78 0.05 80);

  /* Brand accent ramp */
  --brand-10: oklch(0.97 0.03 85);
  --brand-30: oklch(0.90 0.07 85);
  --brand-50: oklch(0.82 0.11 85);
  --brand-70: oklch(0.74 0.14 85);
  --brand-90: oklch(0.66 0.15 85);

  /* Functional */
  --success-60: oklch(0.70 0.12 145);
  --warning-60: oklch(0.78 0.12 80);
  --danger-60:  oklch(0.66 0.16 28);

  /* Semantic - light + default */
  --bg: var(--ink-10);
  --surface-1: var(--ink-30);
  --surface-2: var(--ink-40);
  --surface-3: var(--ink-50);

  --text-1: var(--ink-100);
  --text-2: var(--ink-80);
  --muted:  var(--ink-60);

  --border: oklch(0.85 0.01 260);
  --focus:  var(--brand-70);

  --accent-low: var(--brand-50);
  --accent: var(--brand-90);
  --accent-high: var(--brand-90);
  --accent-contrast: var(--ink-10);

  --success: var(--success-60);
  --warning: var(--warning-60);
  --danger:  var(--danger-60);

  --surface-hover: color-mix(in oklab, var(--surface-1), black 10%);
  --surface-active: color-mix(in oklab, var(--surface-1), black 12%);
}

.dark {
  --bg: var(--ink-90);
  --surface-1: var(--ink-90);
  --surface-2: var(--ink-80);
  --surface-3: var(--ink-70);

  --text-1: var(--ink-10);
  --text-2: var(--ink-30);
  --muted:  var(--ink-50);

  --border: oklch(0.36 0.02 260);
  --focus:  var(--brand-50);

  --accent-low: var(--brand-70);
  --accent: var(--brand-50);
  --accent-high: var(--brand-30);

  --surface-hover: color-mix(in oklab, var(--surface-1), white 6%);
  --surface-active: color-mix(in oklab, var(--surface-1), white 8%);
}

.button {
  background: var(--accent);
  color: var(--accent-contrast);
}
.button:hover {
  background: color-mix(in oklab, var(--accent), white 8%);
}

.button:active {
  background: color-mix(in oklab, var(--accent), black 10%);
}

.button:focus-visible {
  outline: 2px solid var(--focus);
  outline-offset: 2px;
}

/* Tailwind-facing aliases */
@theme {
  --color-ink-10: var(--ink-10);
  --color-ink-20: var(--ink-20);
  --color-ink-30: var(--ink-30);
  --color-ink-40: var(--ink-40);
  --color-ink-50: var(--ink-50);
  --color-ink-60: var(--ink-60);
  --color-ink-70: var(--ink-70);
  --color-ink-80: var(--ink-80);
  --color-ink-90: var(--ink-90);
  --color-ink-100: var(--ink-100);

  --color-stone-20: var(--stone-20);
  --color-stone-40: var(--stone-40);
  --color-stone-60: var(--stone-60);

  --color-brand-10: var(--brand-10);
  --color-brand-30: var(--brand-30);
  --color-brand-50: var(--brand-50);
  --color-brand-70: var(--brand-70);
  --color-brand-90: var(--brand-90);

  --color-success: var(--success);
  --color-warning: var(--warning);
  --color-danger: var(--danger);

  --color-bg: var(--bg);
  --color-surface-1: var(--surface-1);
  --color-surface-2: var(--surface-2);
  --color-surface-3: var(--surface-3);

  --color-text-1: var(--text-1);
  --color-text-2: var(--text-2);
  --color-muted: var(--muted);

  --color-border: var(--border);
  --color-focus: var(--focus);

  --color-accent: var(--accent);
  --color-accent-contrast: var(--accent-contrast);

  --color-surface-hover: var(--surface-hover);
  --color-surface-active: var(--surface-active);
}

@layer base {
  html {
    scroll-behavior: smooth;
    @apply bg-surface-1 text-1;
    transition: background-color 0.3s ease, color 0.1s ease;
  }

  body {
    text-wrap: balance;
    font: var(--p);
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }

  h1 {
    font: var(--h1);
    @apply my-2;
  }

  h2 {
    font: var(--h2);
    @apply my-2;
  }

  h3 {
    font: var(--h3);
    @apply my-2;
  }

  p {
    @apply my-2;
    white-space: normal;
    word-break: break-word;
  }

  a {
    @apply text-ink-100 no-underline;
  }

  a:hover {
    @apply text-ink-30;
  }
}

@layer components {
}

@layer utilities {
  .paper-texture {
    &::before {
      content: '';
      position: absolute;
      inset: 0;

      background-image:
              repeating-linear-gradient(30deg, rgba(255,255,255,0.01) 0 2px, rgba(0,0,0,0.01) 2px 4px), /* striped pattern */
              radial-gradient(circle at 30% 35%, rgba(0,0,0,0.1) 0%, transparent 30%), /* highlight a */
              radial-gradient(circle at 70% 65%, rgba(0,0,0,0.1) 0%, transparent 50%), /* highlight b */
              url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PGZpbHRlciBpZD0ibm9pc2VGaWx0ZXIiPjxmZVR1cmJ1bGVuY2UgdHlwZT0iZnJhY3RhbE5vaXNlIiBiYXNlRnJlcXVlbmN5PSIxIiBudWJPY3RhdmVzPSIzIiBzZWVkPSIyIi8+PGZlQ29sb3JNYXRyaXggdHlwZT0ic2F0dXJhdGUiIHZhbHVlcz0iMCIvPjwvZmlsdGVyPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbHRlcj0idXJsKCNub2lzZUZpbHRlcikiIG9wYWNpdHk9IjAuMDUiIC8+PC9zdmc+");  /* grain */
      background-size:
              100% 100%,
              100% 100%,
              200% 200%,
              50px 50px;

      mix-blend-mode: overlay;
      opacity: 0.8;
      pointer-events: none;
      z-index: 0;
    }
  }

  .defined-shadow {
    box-shadow:
            0 8px 20px rgba(0, 0, 0, 0.3),
            0 2px 6px rgba(0, 0, 0, 0.2);
  }

  .brand-gradient {
    background: linear-gradient(
            90deg,
            var(--accent-high) 0%,
            var(--accent) 30%
    );
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .text-glow {
    text-shadow:
            0 0 3px oklch(from var(--brand-50) l c h / 0.5),
            0 0 5px oklch(from var(--brand-50) l c h / 0.3);
  }

  .hover-text-glow:hover {
    text-shadow:
            0 0 3px oklch(from var(--brand-50) l c h / 0.5),
            0 0 5px oklch(from var(--brand-50) l c h / 0.3);
  }
}
